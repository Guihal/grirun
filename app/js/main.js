!function(){"use strict";function e(e){const t=e.target.closest(".swiper-slide");if(!t)return;const n=document.querySelector(".t-slds__thumbsbullet");n&&(n.dataset.slideBulletFor=t.dataset.index,n.click())}function t(e,t){const n=t.querySelector(".swiper-wrapper");s();const i=new MutationObserver(((e,t)=>s));function s(){e.querySelectorAll('.t-slds__item:not([data-slide-index="0"]) .t-slds__imgwrapper').forEach(((e,t)=>{const i=e.dataset.imgZoomUrl;void 0!==i&&function(e,t){let i=n.querySelector(`img[src="${e}"]`);i||(i=Object.assign(document.createElement("div"),{className:"swiper-slide"}),i.dataset.index=t,i.innerHTML=`<img width="60" height="60" src="${e}" alt="Красивая футболка" />`,n.append(i))}(i,t+1)}))}console.log("wtf");let o=!1;function r(){o||(o=!0,i.disconnect(),console.log("disconnected"))}document.addEventListener("DOMContentLoaded",r),window.addEventListener("load",r),setTimeout(r,5e3),i.observe(e,{childList:!0,subtree:!0})}async function n(e,t=!1){return new Promise((n=>{let i=document.querySelector(e);if(i)return void n(i);new MutationObserver(((s,o)=>{i=t?t.querySelector(e):document.querySelector(e),i&&(n(i),o.disconnect())})).observe(t||document.documentElement,{childList:!0,subtree:!0})}))}function i(){document.querySelectorAll(".js-store-grid-cont:not(.check)").forEach((async e=>{e.classList.add("check"),await s(e,".js-product .t-product__option-variants_image"),setTimeout((()=>{document.querySelectorAll(".js-product .t-product__option-variants_image:not(.check)").forEach((async e=>{e.classList.add("check"),await s(e,".t-product__option-item");const t=e.querySelectorAll(".t-product__option-item");if(0===t.length)return;const n=Math.round(e.offsetWidth/(t[0].offsetWidth+7));n>=t.length||function(e,t){if(t<=1)return;t--;const n=Object.assign(document.createElement("div"),{className:"hidden-images",innerHTML:'<div class="counter"></div>'}),i=n.querySelector(".counter");e.forEach(((s,o)=>{o>t?s.classList.add("hidden"):o<t?s.classList.remove("hidden"):(e[o-1].after(n),n.append(s),i&&(i.textContent="+"+(e.length-t)))})),n.addEventListener("click",(()=>{const e=n.closest(".js-product");if(!e)return;let t=e.dataset.productUrl;if(console.log(t),void 0===t)return;t=new URL(t);const i=new URL(t.pathname,window.location.origin);console.log(i),window.location.href=i}))}(t,n)}))}))}))}function s(e,t){return new Promise(((n,i)=>{o(e,t,n);const s=new MutationObserver((()=>{o(e,t,n),s.disconnect()}));s.observe(e,{childList:!0,subtree:!0})}))}function o(e,t,n){e.querySelector(t)&&n()}!async function(i){const s=await n(".t-store__product-snippet .t-slds__main"),o="guihal-swiper-thumbs",r=Object.assign(document.createElement("div"),{className:"swiper-container"});let c;r.innerHTML=`\n        <svg class="swiper-nav_prev" width="27" height="17" viewBox="0 0 27 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M0.47177 14.9384L0.471846 14.9383L12.8376 0.525053C13.0211 0.31122 13.259 0.200001 13.4977 0.200001C13.7364 0.200001 13.9742 0.311218 14.1577 0.525059L14.1577 0.525082L26.5282 14.9384L26.5282 14.9384C26.6124 15.0364 26.6809 15.1555 26.7281 15.2893C26.7754 15.4232 26.8 15.5679 26.8 15.7148C26.8 15.8617 26.7754 16.0065 26.7281 16.1404C26.6809 16.2742 26.6124 16.3933 26.5282 16.4913L26.528 16.4915C26.354 16.6947 26.1287 16.8 25.903 16.8C25.6773 16.8 25.452 16.6947 25.278 16.4915L25.2779 16.4914L13.6495 2.93753L13.4977 2.76059L13.3459 2.93755L1.71986 16.4913C1.71985 16.4913 1.71983 16.4913 1.71982 16.4913C1.54594 16.6938 1.32105 16.7986 1.09582 16.7986C0.870585 16.7986 0.645671 16.6938 0.471788 16.4913L0.47177 16.4913C0.387602 16.3933 0.319135 16.2742 0.271887 16.1404C0.224643 16.0065 0.2 15.8617 0.2 15.7148C0.2 15.5679 0.224643 15.4232 0.271887 15.2893C0.319135 15.1555 0.387602 15.0364 0.47177 14.9384Z" fill="#5C5A5A" stroke="#F7F7F7" stroke-width="0.4"/>\n        </svg>\n        <div class="swiper" id="${o}">\n            <div class="swiper-wrapper"></div>\n        </div>\n        <svg class="swiper-nav_next" width="27" height="17" viewBox="0 0 27 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M0.47177 2.06158L0.471846 2.06167L12.8376 16.4749C13.0211 16.6888 13.259 16.8 13.4977 16.8C13.7364 16.8 13.9742 16.6888 14.1577 16.4749L14.1577 16.4749L26.5282 2.06164L26.5282 2.06158C26.6124 1.96359 26.6809 1.84454 26.7281 1.71069C26.7754 1.57684 26.8 1.43207 26.8 1.28516C26.8 1.13825 26.7754 0.993476 26.7281 0.859632C26.6809 0.725776 26.6124 0.606727 26.5282 0.508737L26.528 0.508497C26.354 0.305274 26.1287 0.2 25.903 0.2C25.6773 0.2 25.452 0.305274 25.278 0.508497L25.2779 0.508648L13.6495 14.0625L13.4977 14.2394L13.3459 14.0625L1.71986 0.508716C1.71985 0.5087 1.71983 0.508683 1.71982 0.508667C1.54594 0.306209 1.32105 0.201358 1.09582 0.201358C0.870585 0.201358 0.645671 0.306226 0.471788 0.508716L0.47177 0.508736C0.387602 0.606726 0.319135 0.725775 0.271887 0.859632C0.224643 0.993478 0.2 1.13826 0.2 1.28516C0.2 1.43206 0.224643 1.57684 0.271887 1.71069C0.319135 1.84454 0.387602 1.96359 0.47177 2.06158Z" fill="#5C5A5A" stroke="#F7F7F7" stroke-width="0.4"/>\n        </svg>\n    `,r.addEventListener("click",e),s.after(r),await i;const d=async()=>{let e;void 0!==c&&(e=c.activeIndex,c.destroy(!0,!0));const t=await function(e,t){const n=e.querySelector(".t-slds__items-wrapper"),i=t.querySelector(".swiper");return new Promise((async(e,s)=>{const o=await new Promise(((e,t)=>{let i=n.parentNode.getBoundingClientRect();if(i.height>100&&i.width>100)return void e(i);const s=new MutationObserver((()=>{i=n.parentNode.getBoundingClientRect(),i.height>100&&(e(i),s.disconnect())}));s.observe(n,{attributes:!0})}));if(window.innerWidth>=980){t.style.maxWidth="auto",t.style.maxHeight=`${o.height}px`;const n=Math.round((o.height-74)/65);return i.style.maxHeight=60*n+10*(n-1)+"px",i.style.maxWidth="auto",void e(n)}t.style.maxHeight="auto",t.style.maxWidth=`${o.width}px`;const r=Math.round((o.width-74)/65);return i.style.maxWidth=60*r+10*(r-1)+"px",i.style.maxHeight="auto",void e(r)}))}(s,r);console.log(t),window.innerWidth>=980?(console.log("big"),c=new Swiper(`#${o}`,{direction:"vertical",spaceBetween:10,slidesPerView:t,observer:!0,navigation:{nextEl:".swiper-nav_next",prevEl:".swiper-nav_prev"}})):(console.log("small"),c=new Swiper(`#${o}`,{direction:"horizontal",spaceBetween:10,slidesPerView:t,observer:!0,navigation:{nextEl:".swiper-nav_next",prevEl:".swiper-nav_prev"}})),void 0!==e&&void 0!==c&&c.slideTo(e,0,!1)};window.addEventListener("resize",function(e,t){let n,i,s=!1;return function o(){if(s)return n=arguments,void(i=this);e.apply(this,arguments),s=!0,setTimeout((function(){s=!1,n&&(o.apply(i,n),n=i=null)}),t)}}(d),50),d(),document.addEventListener("click",(e=>{e.isTrusted&&e.target.closest(".t-product__option-item")&&setTimeout((()=>{const e=document.querySelector(".t-slds__item_active");if(!e)return;const t=e.dataset.slideIndex;void 0!==t&&c.slideTo(t,0,!1)}),100)})),t(s,r)}(new Promise((async(e,t)=>{const i=await n("head");if(!window.location.pathname.includes("tproduct"))return;const s=Object.assign(document.createElement("link"),{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"}),o=Object.assign(document.createElement("script"),{src:"https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"});let r=!1,c=!1;function d(){c&&r&&(e(),console.log("all ok"))}i.append(s),i.append(o),s.addEventListener("load",(()=>{r=!0,d()})),o.addEventListener("load",(()=>{c=!0,d()}))}))),async function(){const e=await n("#allrecords");new MutationObserver(i).observe(e,{childList:!0,subtree:!0})}()}();